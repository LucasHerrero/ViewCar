<div>
  <div class="mt-10">
    <p class="text-lg mb-3">{{ 'general.welcome' | translate }}</p>
    <div class="flex text-3xl">
      <span class="font-extrabold text-6xl pr-1">8.</span>
      <h1 class="md:pt-2.5 md:pl-0 pl-2 font-light">Resumen de tu configuración</h1>
    </div>
  </div>

  <div class="flex md:flex-row flex-col-reverse mt-10 gap-8">
    <div class="md:w-[70%] w-full">
      <div class="relative image-viewer mb-8">
        <img class="w-full md:h-[420px] object-cover" [src]="selectedImageList[currentImageIndex]" alt="Image">
        <button class="absolute left-5 top-1/2 hover:scale-125 transition-all ease-in-out duration-300"
          (click)="previousImage()">
          <svg width="32" height="32" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z"
              fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
          </svg>
        </button>
        <button class="absolute right-5 top-1/2 hover:scale-125 transition-all ease-in-out duration-300"
          (click)="nextImage()">
          <svg width="32" height="32" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z"
              fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
          </svg>
        </button>
      </div>
      <p class="mt-2 font-medium">{{ carParts.selectedModel.brand.brandName }} {{ carParts.selectedModel.model }}
        {{ carParts.selectedPackage.bumper }} {{ carParts.selectedEngine.name }} ({{
        carParts.selectedEngine.power }} CV) {{ carParts.selectedEngine.transmission }} | {{
        carParts.selectedEngine.fuel }} | {{ 'resume.consumption' | translate }} {{
        carParts.selectedEngine.consumption }} l/100km {{ 'resume.emisions' | translate }}: {{
        carParts.selectedEngine.emission }} g/km</p>

      <div class="mt-10">
        <div class="mt-6">
          <span class="font-semibold text-2xl">1. {{ 'resume.package' | translate }}
            <button class="ml-2" (click)="setStep(2)">
              <svg data-testid="geist-icon" height="18" stroke-linejoin="round" viewBox="0 0 16 16" width="18"
                style="color: currentcolor;">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M11.75 0.189331L12.2803 0.719661L15.2803 3.71966L15.8107 4.24999L15.2803 4.78032L5.15901 14.9016C4.45575 15.6049 3.50192 16 2.50736 16H0.75H0V15.25V13.4926C0 12.4981 0.395088 11.5442 1.09835 10.841L11.2197 0.719661L11.75 0.189331ZM11.75 2.31065L9.81066 4.24999L11.75 6.18933L13.6893 4.24999L11.75 2.31065ZM2.15901 11.9016L8.75 5.31065L10.6893 7.24999L4.09835 13.841C3.67639 14.2629 3.1041 14.5 2.50736 14.5H1.5V13.4926C1.5 12.8959 1.73705 12.3236 2.15901 11.9016ZM9 16H16V14.5H9V16Z"
                  fill="currentColor">
                </path>
              </svg>
            </button>
          </span>
          <div class="mt-5 border-2 border-green-600 rounded-md p-4">
            <p class="font-semibold text-lg flex justify-between pb-3">{{ carParts.selectedPackage.name }}
              <span>{{ carParts.selectedPackage.price | currency: 'EUR'}}</span>
            </p>
            <hr>
            <div class="flex justify-between">
              <div class="justify-between mt-5">
                <p class="font-semibold">{{ 'resume.bodywork' | translate }}</p>
                <p>{{ carParts.selectedPackage.bodywork }}</p>
              </div>
              <div class="justify-between mt-5">
                <p class="font-semibold">{{ 'resume.lights' | translate }}</p>
                <p>{{ carParts.selectedPackage.headlights }}</p>
              </div>
              <div class="justify-between mt-5">
                <p class="font-semibold">{{ 'resume.seats' | translate }}</p>
                <p>{{ carParts.selectedPackage.seats }}</p>
              </div>
            </div>
            <button (click)="infoPackage()" class="flex items-center gap-2 mt-4 rounded-full bg-[#e7e7e6] px-5 py-1.5">
              <svg data-testid="geist-icon" height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16"
                style="color: currentcolor;">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM6.25 7H7H7.74999C8.30227 7 8.74999 7.44772 8.74999 8V11.5V12.25H7.24999V11.5V8.5H7H6.25V7ZM8 6C8.55229 6 9 5.55228 9 5C9 4.44772 8.55229 4 8 4C7.44772 4 7 4.44772 7 5C7 5.55228 7.44772 6 8 6Z"
                  fill="currentColor">
                </path>
              </svg>
              {{ 'resume.info' | translate }}
            </button>
            <!-- Más información -->
            <div *ngIf="showInfo && carParts.selectedPackage.description && carParts.selectedPackage"
              class="border-2 mt-[50px] p-4 rounded-md transition-all ease-in-out duration-500">
              <p class="font-semibold text-xl pb-4">{{ 'resume.info' | translate }} sobre el paquete {{
                carParts.selectedPackage.name }}</p>
              <div>
                <ul class="list-disc list-inside">
                  <li *ngFor="let item of getDescriptionItems()">{{ item }}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-8">
          <span class="font-semibold text-2xl">2. {{ 'resume.motor' | translate }}
            <button class="ml-2" (click)="setStep(3)">
              <svg data-testid="geist-icon" height="18" stroke-linejoin="round" viewBox="0 0 16 16" width="18"
                style="color: currentcolor;">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M11.75 0.189331L12.2803 0.719661L15.2803 3.71966L15.8107 4.24999L15.2803 4.78032L5.15901 14.9016C4.45575 15.6049 3.50192 16 2.50736 16H0.75H0V15.25V13.4926C0 12.4981 0.395088 11.5442 1.09835 10.841L11.2197 0.719661L11.75 0.189331ZM11.75 2.31065L9.81066 4.24999L11.75 6.18933L13.6893 4.24999L11.75 2.31065ZM2.15901 11.9016L8.75 5.31065L10.6893 7.24999L4.09835 13.841C3.67639 14.2629 3.1041 14.5 2.50736 14.5H1.5V13.4926C1.5 12.8959 1.73705 12.3236 2.15901 11.9016ZM9 16H16V14.5H9V16Z"
                  fill="currentColor">
                </path>
              </svg>
            </button>
          </span>
          <div class="mt-5 border-2 border-green-600 rounded-md p-4">
            <p class="font-semibold text-lg flex justify-between pb-3"> {{ carParts.selectedEngine.name }}
              <span>{{ carParts.selectedEngine.price | currency: 'EUR'}}</span>
            </p>
            <hr>
            <div class="flex justify-between">
              <div class="justify-between mt-5">
                <p class="font-semibold">Potencia</p>
                <p>{{ carParts.selectedEngine.power }} CV</p>
              </div>
              <div class="justify-between mt-5">
                <p class="font-semibold">Transmisión</p>
                <p>{{ carParts.selectedEngine.transmission }}</p>
              </div>
              <div class="justify-between mt-5">
                <p class="font-semibold">Consumo</p>
                <p>{{ carParts.selectedEngine.consumption }} l/100km</p>
              </div>
              <div class="justify-between mt-5">
                <p class="font-semibold">Emisiones</p>
                <p>{{ carParts.selectedEngine.emission }} g/km</p>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-8">
          <span class="font-semibold text-2xl">3. {{ 'resume.extColor' | translate }}
            <button class="ml-2" (click)="setStep(4)">
              <svg data-testid="geist-icon" height="18" stroke-linejoin="round" viewBox="0 0 16 16" width="18"
                style="color: currentcolor;">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M11.75 0.189331L12.2803 0.719661L15.2803 3.71966L15.8107 4.24999L15.2803 4.78032L5.15901 14.9016C4.45575 15.6049 3.50192 16 2.50736 16H0.75H0V15.25V13.4926C0 12.4981 0.395088 11.5442 1.09835 10.841L11.2197 0.719661L11.75 0.189331ZM11.75 2.31065L9.81066 4.24999L11.75 6.18933L13.6893 4.24999L11.75 2.31065ZM2.15901 11.9016L8.75 5.31065L10.6893 7.24999L4.09835 13.841C3.67639 14.2629 3.1041 14.5 2.50736 14.5H1.5V13.4926C1.5 12.8959 1.73705 12.3236 2.15901 11.9016ZM9 16H16V14.5H9V16Z"
                  fill="currentColor">
                </path>
              </svg>
            </button>
          </span>
          <div class="mt-5 border-2 border-green-600 rounded-md p-4">
            <p class="font-semibold text-lg flex justify-between pb-3"> {{
              carParts.selectedExtColor.color }} <span>{{ carParts.selectedExtColor.price |
                currency: 'EUR'}}</span></p>
            <div class="flex justify-center">
              <img class="w-16 h-16 rounded-full border-2 object-cover p-1" [src]="carParts.selectedExtColor.circulo"
                alt="">
            </div>
          </div>
        </div>

        <div class="mt-8">
          <span class="font-semibold text-2xl">4. {{ 'resume.tapiceria' | translate }}
            <button class="ml-2" (click)="setStep(5)">
              <svg data-testid="geist-icon" height="18" stroke-linejoin="round" viewBox="0 0 16 16" width="18"
                style="color: currentcolor;">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M11.75 0.189331L12.2803 0.719661L15.2803 3.71966L15.8107 4.24999L15.2803 4.78032L5.15901 14.9016C4.45575 15.6049 3.50192 16 2.50736 16H0.75H0V15.25V13.4926C0 12.4981 0.395088 11.5442 1.09835 10.841L11.2197 0.719661L11.75 0.189331ZM11.75 2.31065L9.81066 4.24999L11.75 6.18933L13.6893 4.24999L11.75 2.31065ZM2.15901 11.9016L8.75 5.31065L10.6893 7.24999L4.09835 13.841C3.67639 14.2629 3.1041 14.5 2.50736 14.5H1.5V13.4926C1.5 12.8959 1.73705 12.3236 2.15901 11.9016ZM9 16H16V14.5H9V16Z"
                  fill="currentColor">
                </path>
              </svg>
            </button>
          </span>
          <div class="mt-5 border-2 border-green-600 rounded-md p-4">
            <p class="font-semibold text-lg flex justify-between pb-3">
              {{ carParts.selectedIntColor.color }}
              <span *ngIf="carParts.selectedIntColor.price == 0; else priceBlock">{{ 'resume.cost' |
                translate }}</span>
              <ng-template #priceBlock>{{ carParts.selectedIntColor.price | currency: 'EUR'
                }}</ng-template>
            </p>
            <div class="flex justify-center">
              <img class="w-16 h-16 rounded-full border-2 object-cover p-1" [src]="carParts.selectedIntColor.circulo"
                alt="">
            </div>
          </div>
        </div>

        <div class="mt-8">
          <span class="font-semibold text-2xl">5. {{ 'resume.tires' | translate }}
            <button class="ml-2" (click)="setStep(6)">
              <svg data-testid="geist-icon" height="18" stroke-linejoin="round" viewBox="0 0 16 16" width="18"
                style="color: currentcolor;">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M11.75 0.189331L12.2803 0.719661L15.2803 3.71966L15.8107 4.24999L15.2803 4.78032L5.15901 14.9016C4.45575 15.6049 3.50192 16 2.50736 16H0.75H0V15.25V13.4926C0 12.4981 0.395088 11.5442 1.09835 10.841L11.2197 0.719661L11.75 0.189331ZM11.75 2.31065L9.81066 4.24999L11.75 6.18933L13.6893 4.24999L11.75 2.31065ZM2.15901 11.9016L8.75 5.31065L10.6893 7.24999L4.09835 13.841C3.67639 14.2629 3.1041 14.5 2.50736 14.5H1.5V13.4926C1.5 12.8959 1.73705 12.3236 2.15901 11.9016ZM9 16H16V14.5H9V16Z"
                  fill="currentColor">
                </path>
              </svg>
            </button>
          </span>
          <div class="mt-5 border-2 border-green-600 rounded-md p-4">
            <p class="font-semibold text-lg flex justify-between">
              {{ carParts.selectedTires.name }}
              <span>{{ carParts.selectedTires.price | currency: 'EUR' }}</span>
            </p>
            <p>{{ carParts.selectedTires.description }}</p>
            <div class="flex justify-center mt-4">
              <img class="w-16 h-16 rounded-full border-2 object-cover p-1" src="{{ carParts.selectedTires.circulo }}"
                alt="">
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="md:w-[30%] w-full">
      <p class="font-semibold text-xl">{{ carParts.selectedModel.brand.brandName }}</p>
      <p class="font-black text-5xl">{{ carParts.selectedModel.model }} {{ carParts.selectedPackage.bumper }}</p>
      <div class="rounded-md bg-[#F8F8F6] p-5 mt-6">
        <p class="font-semibold text-xl pb-4">{{ 'resume.desglose' | translate }}</p>
        <hr>
        <div class="mt-5">
          <div class="flex justify-between text-base">
            <p>Precio base</p>
            <p class="font-semibold">{{ carParts.selectedModel.price | currency: 'EUR' }}</p>
          </div>
          <div class="flex justify-between text-base">
            <p>Paquete</p>
            <p class="font-semibold">{{ carParts.selectedPackage.price | currency: 'EUR' }}</p>
          </div>
          <div class="flex justify-between text-base">
            <p>Motor</p>
            <p class="font-semibold">{{ carParts.selectedEngine.price | currency: 'EUR' }}</p>
          </div>
          <div class="flex justify-between text-base">
            <p>Color exterior</p>
            <p class="font-semibold">{{ carParts.selectedExtColor.price | currency: 'EUR' }}</p>
          </div>
          <div class="flex justify-between text-base">
            <p>Tapicería</p>
            <p class="font-semibold">{{ carParts.selectedIntColor.price | currency: 'EUR' }}</p>
          </div>
          <div class="flex justify-between text-base">
            <p>Llantas</p>
            <p class="font-semibold">{{ carParts.selectedTires.price | currency: 'EUR' }}</p>
          </div>
          <hr class="my-4">
          <div class="flex justify-between text-lg">
            <p>{{ 'resume.precioFinal' | translate }}</p>
            <p class="font-semibold">{{ getTotalPrice() | currency: 'EUR' }}</p>
          </div>
        </div>
        <div class="m-auto flex flex-col justify-center items-center">
          <button (click)="saveConfigCar()"
            class="w-[85%] text-sm bg-[#C2CACF] text-black/70 font-semibold rounded-full mt-5 py-3 flex items-center justify-center gap-2 hover:bg-gray-500">
            <svg data-testid="geist-icon" height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16"
              style="color: currentcolor;">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M4.875 1.5C3.01104 1.5 1.5 3.01104 1.5 4.875V6.40385C1.5 7.22166 1.87727 7.95083 2.47018 8.42791L3.0545 8.89808L2.11415 10.0667L1.52982 9.59656C0.598275 8.84699 0 7.69502 0 6.40385V4.875C0 2.18261 2.18261 0 4.875 0C6.79184 0 8.44888 1.1064 9.2449 2.71201C9.35322 2.93049 9.51183 3 9.60112 3H12.25C14.3211 3 16 4.67893 16 6.75C16 7.8785 15.5006 8.89123 14.7133 9.57758L14.1479 10.0704L13.1622 8.93972L13.7276 8.44689C14.202 8.03329 14.5 7.42688 14.5 6.75C14.5 5.50736 13.4926 4.5 12.25 4.5H9.60112C8.79547 4.5 8.1902 3.96162 7.901 3.37829C7.34838 2.26364 6.20018 1.5 4.875 1.5ZM8.75 13.4393L10.7197 11.4697L11.25 10.9393L12.3107 12L11.7803 12.5303L8.70711 15.6036C8.31658 15.9941 7.68342 15.9941 7.29289 15.6036L4.21967 12.5303L3.68934 12L4.75 10.9393L5.28033 11.4697L7.25 13.4393V7.75V7H8.75V7.75V13.4393Z"
                fill="currentColor"></path>
            </svg>
            Guardar configuración
          </button>
    
          <button (click)="showFinancing()"
            class="w-[85%] text-sm bg-[#C2CACF] text-black/70 font-semibold rounded-full mt-2 py-3 flex items-center justify-center gap-2 hover:bg-gray-500">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z" />
            </svg>
            Simulador de financiación
          </button>
          <button (click)="onButtonClick() "
            class="w-[85%] text-sm bg-[#C2CACF] text-black/70 font-semibold rounded-full mt-2 py-3 flex items-center justify-center gap-2 hover:bg-gray-500">
            <svg data-testid="geist-icon" height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16"
              style="color: currentcolor;">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M2.5 3.25C2.5 1.45507 3.95507 0 5.75 0H6.25C8.04493 0 9.5 1.45507 9.5 3.25V3.75C9.5 5.54493 8.04493 7 6.25 7H5.75C3.95507 7 2.5 5.54493 2.5 3.75V3.25ZM5.75 1.5C4.7835 1.5 4 2.2835 4 3.25V3.75C4 4.7165 4.7835 5.5 5.75 5.5H6.25C7.2165 5.5 8 4.7165 8 3.75V3.25C8 2.2835 7.2165 1.5 6.25 1.5H5.75ZM1.5 14.5V13.1709C2.31958 11.5377 3.99308 10.5 5.82945 10.5H6.17055C8.00692 10.5 9.68042 11.5377 10.5 13.1709V14.5H1.5ZM5.82945 9C3.35483 9 1.10604 10.4388 0.0690305 12.6857L0 12.8353V13V15.25V16H0.75H11.25H12V15.25V13V12.8353L11.931 12.6857C10.894 10.4388 8.64517 9 6.17055 9H5.82945ZM15.931 12.6857C15.3706 11.4715 14.4561 10.4931 13.3439 9.85058L12.5935 11.1494C13.399 11.6148 14.0681 12.3101 14.5 13.1709V14.5H13.5V16H15.25H16V15.25V13V12.8352L15.931 12.6857ZM11.25 0H10.5V1.5H11.25C12.2165 1.5 13 2.2835 13 3.25V3.75C13 4.7165 12.2165 5.5 11.25 5.5H10.5V7H11.25C13.0449 7 14.5 5.54493 14.5 3.75V3.25C14.5 1.45507 13.0449 0 11.25 0Z"
                fill="currentColor"></path>
            </svg>
            Pide tu cita aqui!
          </button>
        </div>
      </div>

      <!-- Datos de simulación de financiación -->
      <div *ngIf="isFinancingDataAvailable()" class="md:w-[100%] w-full">
        <div class="rounded-md bg-[#F8F8F6] p-5 mt-6">
          <p class="font-semibold text-xl pb-4">Financiación simulada</p>
          <hr>
          <div class="mt-5">
            <div class="flex justify-between text-base">
              <p>Entrada inicial</p>
              <p class="font-semibold">{{financingData.entrada | number:'1.2-2'}} €</p>
            </div>
            <div class="flex justify-between text-base">
              <p>Meses</p>
              <p class="font-semibold">{{financingData.meses}}</p>
            </div>
            <div class="flex justify-between text-base">
              <p>Cuota mensual</p>
              <p class="font-semibold">{{financingData.cuota}}€/mes</p>
            </div>
            <div class="flex justify-between text-base">
              <p>Interés anual</p>
              <p class="font-semibold">5%</p>
            </div>
          </div>
        </div>
      </div>

    </div>
